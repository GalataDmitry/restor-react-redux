{"ast":null,"code":"import _toConsumableArray from \"D:\\\\re-store-vol1\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\n\nvar updateCartItems = function updateCartItems(cartItems, item, idx) {\n  console.log('cartItems', cartItems);\n  console.log('item', item);\n  console.log('idx', idx);\n\n  if (item.count === 0) {\n    return [].concat(_toConsumableArray(cartItems.slice(0, idx)), _toConsumableArray(cartItems.slice(idx + 1)));\n  }\n\n  if (idx === -1) {\n    return [].concat(_toConsumableArray(cartItems), [item]);\n  }\n\n  return [].concat(_toConsumableArray(cartItems.slice(0, idx)), [item], _toConsumableArray(cartItems.slice(idx + 1)));\n};\n\nvar updateCartItem = function updateCartItem(book) {\n  var item = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var quantity = arguments.length > 2 ? arguments[2] : undefined;\n  var _item$id = item.id,\n      id = _item$id === void 0 ? book.id : _item$id,\n      _item$title = item.title,\n      title = _item$title === void 0 ? book.title : _item$title,\n      _item$count = item.count,\n      count = _item$count === void 0 ? 0 : _item$count,\n      _item$total = item.total,\n      total = _item$total === void 0 ? 0 : _item$total;\n  return {\n    id: id,\n    title: title,\n    count: count + quantity,\n    total: total + quantity * book.price\n  };\n};\n\nvar updateOrder = function updateOrder(state, bookId, quantity) {\n  var books = state.bookList.books,\n      cartItems = state.shoppingCart.cartItems;\n  var book = books.find(function (_ref) {\n    var id = _ref.id;\n    return id === bookId;\n  });\n  var itemIndex = cartItems.findIndex(function (_ref2) {\n    var id = _ref2.id;\n    return id === bookId;\n  });\n  var item = cartItems[itemIndex];\n  var newItem = updateCartItem(book, item, quantity);\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(cartItems, newItem, itemIndex)\n  };\n};\n\nvar updateShoppingCart = function updateShoppingCart(state, action) {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    };\n  }\n\n  switch (action.type) {\n    case 'BOOK_ADDED_TO_CART':\n      return updateOrder(state, action.payload, 1);\n\n    case 'BOOK_REMOVED_FROM_CART':\n      return updateOrder(state, action.payload, -1);\n\n    case 'ALL_BOOKS_REMOVED_FROM_CART':\n      var item = state.shoppingCart.cartItems.find(function (_ref3) {\n        var id = _ref3.id;\n        return id === action.payload;\n      });\n      return updateOrder(state, action.payload, -item.count);\n\n    default:\n      return state.shoppingCart;\n  }\n};\n\nexport default updateShoppingCart;","map":{"version":3,"sources":["D:/re-store-vol1/src/reducers/shopping-cart.js"],"names":["updateCartItems","cartItems","item","idx","console","log","count","slice","updateCartItem","book","quantity","id","title","total","price","updateOrder","state","bookId","books","bookList","shoppingCart","find","itemIndex","findIndex","newItem","orderTotal","updateShoppingCart","action","undefined","type","payload"],"mappings":"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","sourcesContent":["const updateCartItems = (cartItems, item, idx) => {\r\n    console.log('cartItems', cartItems)\r\n    console.log('item', item)\r\n    console.log('idx', idx)\r\n\r\n    if (item.count === 0) {\r\n        return [\r\n            ...cartItems.slice(0, idx),\r\n            ...cartItems.slice(idx + 1)\r\n        ]\r\n    }\r\n    if (idx === -1) {\r\n        return [\r\n            ...cartItems,\r\n            item\r\n        ]\r\n    }\r\n    return [\r\n        ...cartItems.slice(0, idx),\r\n        item,\r\n        ...cartItems.slice(idx + 1)\r\n    ]\r\n}\r\n\r\nconst updateCartItem = (book, item = {}, quantity) => {\r\n\r\n    const {\r\n        id = book.id,\r\n        title = book.title,\r\n        count = 0,\r\n        total = 0\r\n    } = item\r\n\r\n    return {\r\n        id,\r\n        title,\r\n        count: count + quantity,\r\n        total: total + quantity * book.price\r\n\r\n    }\r\n}\r\n\r\nconst updateOrder = (state, bookId, quantity) => {\r\n\r\n    const {bookList: {books}, shoppingCart: {cartItems}} = state\r\n\r\n    const book = books.find(({id}) => id === bookId)\r\n    const itemIndex = cartItems.findIndex(({id}) => id === bookId)\r\n    const item = cartItems[itemIndex]\r\n\r\n    const newItem = updateCartItem(book, item, quantity)\r\n\r\n\r\n    return {\r\n        orderTotal: 0,\r\n        cartItems: updateCartItems(cartItems, newItem, itemIndex)\r\n    }\r\n}\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n    if (state === undefined) {\r\n        return {\r\n            cartItems: [],\r\n            orderTotal: 0\r\n        }\r\n    }\r\n    switch (action.type) {\r\n        case 'BOOK_ADDED_TO_CART':\r\n            return updateOrder(state, action.payload, 1)\r\n\r\n        case 'BOOK_REMOVED_FROM_CART':\r\n            return updateOrder(state, action.payload, -1)\r\n\r\n        case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n            const item = state.shoppingCart.cartItems.find(({id}) => id === action.payload)\r\n            return updateOrder(state, action.payload, - item.count)\r\n        default: return state.shoppingCart\r\n    }\r\n}\r\n\r\nexport default updateShoppingCart"]},"metadata":{},"sourceType":"module"}